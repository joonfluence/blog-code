# 서론

오늘은 트랜잭션에 대해서 알아보도록 하겠습니다.

# 본론

### 트랜잭션이란?

데이터베이스(이하 DB)에서 더 이상 나눌 수 없는 최소의 실행 단위를 말합니다. 또 DB는 하나의 트랜잭션을 수행할 때 온전히 그 명령이 실행되는 것 보장하며, 실행 도중 오류가 발생하면 해당 쿼리를 실행하기 이전 상태로 되돌림으로써 데이터의 일관성을 보장합니다.

### 트랜잭션의 실행과정

DB에서는 명령이 끝날 때까지 수행 내역을 로그에 보관합니다. DB에서 반영된 내용을 재반영하기 위한 Redo Log와 수행에 실패해 이전의 상태로 되돌리는 Undo Log를 이용해, 트랜잭션이 수행될 수 있도록 합니다.

### 트랜잭션의 성질

1. 원자성 (Atomicity)
  - 트랜잭션은 DB 작업의 논리적인 작업 단위로, 트랜잭션은 DB에 모두 반영되거나 아니면 전혀 반영되지 않아야 한다는 것입니다.
2. 독립성 (Isolation)
  - 어떤 하나의 트랜잭션이라도, 다른 트랜잭션의 연산에 끼어들 수 없다는 점을 말합니다.
3. 지속성 (Durability)
  - 트랜잭션이 완료됐을 때, 결과는 영구적으로 반영되어야 합니다.
4. 일관성 (Consistency)
  - 트랜잭션의 작업 처리 결과가 항상 일관성 있어야 한다는 것이다.

### 예시

설명이 어려우니 예를 들어, 설명해보겠습니다. 사용자(A)가 다른 사용자(B)에게 송금해야 하는 상황을 생각해봅시다. A의 통장에서 보낼 금액만큼 차감되고 B의 통장에는 A가 보낸만큼 금액이 추가되어야 합니다. 작업 도중 하나만 성공하고 나머지가 실패한다면, 문제가 발생될 것입니다. 일련의 과정이 모두 성공해야, 작업이 성공될 수 있습니다.

하나로 묶여 있는 동작이 성공적으로 수행되면, 이를 데이터베이스에 반영해야 합니다. 이는 DB가 일관성 있는 상태이며, 하나의 트랜잭션이 끝났다는 의미로 `트랜잭션 커밋`이라고 합니다. 이 연산을 사용하면 수행했던 트랜잭션이 로그에 저장되며, 후에 Rollback 연산의 새로운 기준점이 됩니다. 

반대로 하나의 트랜잭션 처리가 비정상적으로 종료되어 원자성이 꺠진 경우, 트랜잭션을 처음부터 다시 시작하거나, 트랜잭션의 부분적으로만 연산된 결과를 취소하는 경우를 `롤백`이라고 합니다.

# 참고한 사이트

[[10분 테코톡] 🐤 샐리의 트랜잭션](https://www.youtube.com/watch?v=aX9c7z9l_u8)
[[10분 테코톡] 🙊 에이든의 트랜잭션 메커니즘](https://www.youtube.com/watch?v=ImvYNlF_saE)
[트랜잭션이란?](https://mommoo.tistory.com/62)