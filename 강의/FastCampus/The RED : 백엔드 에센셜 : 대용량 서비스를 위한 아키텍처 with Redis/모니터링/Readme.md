### 모니터링 시스템을 위해 살펴봐야 하는 지표

- API Call 수
- API Latency

### 서비스 노드 지표

- 서버의 상태
- CPU 사용량 (DB 및 API 서버, Cache 서버의 CPU 사용량)
- 메모리 사용량
- 디스크 사용량
- 네트워크 사용량 (파일이나, 데이터의 전송량이 얼마나 되는가?)
- 현재 동장중인 정상적인 서버의 수

### 모니터링 시스템

- 그라파다

### 에러 로그 시스템

- Sentry

에러 스택 로그를 파악한다.

### 관련 Saas

- Datadog
- New Relic
- Watap

### Alarm

- 모니터링 지표가 특정 값을 넘는다면 슬랙이나 메신저 등으로 알람을 보내서 모니터링한다.
- 장애의 정도
  - 서비스에 영향을 주는 것인지?
    - 디스크 사용량 확인
- 행동의 여부
  - 즉각 이에 대한 조치가 필요한지?

### 성능 테스트

- 주로 보는 지표
  - TPS
    - Transaction per Second : 1초당 처리할 수 있는 트랜잭션의 갯수를 의미함.
  - Saturation Point
    - 서비스에 사용자가 지속적으로 늘어나면 어느 순간부터 TPS가 더 이상 증가하지 않는 상황이 발생됨. 이렇게 증가하지 않는 지점을 말함.
- 주의사항
  - 주요 시나리오를 테스트할 것인가?
    - 단순히 API 하나만 호출하는 것이 아니라, 실제 서비스에서 사용되는 패턴으로 테스트가 필요하다.
  - 클라이언트의 성능 한계를 확인한다.
    - 부하를 주는 클라이언트의 한계로 인해서 성능 측정이 어려울 수 있으므로, 클라이언트를 점점 늘리면서 테스트를 해야 한다.
- 툴
  - Ngrinder
    - TPS 측정
      - 평균 TPS
      - 최대 TPS
      - 성공 수, 실패 수
    - 특징
      - 실패 수가 30% 넘어서면 테스트가 실패하게 됨
  - Locust
  - JMeter
  - Gatling
  - ab

### 부하 테스트

- 해당 서비스의 어느 부분에서 어느 정도 부하가 걸리는 지를 알아보는 테스트

### 스트레스 테스트

- 성능 테스트/부하 테스트가 특정 시간 이상 지속적으로 안정적으로 되는지 확인하는 테스트

### Recap

- 클라우드 시스템을 구축함에 있어, Ansible 같은 오픈소스 IT 자동화 툴을 사용하는 것이 좋다.
- 추후에 필요한 모니터링 시스템이나 성능 테스트를 위한 서버를 구축을 위한 통합 과정이 매우 편리하기 때문임.

### 참고한 사이트

[https://www.whatap.io/ko/blog/14/](https://www.whatap.io/ko/blog/14/)
